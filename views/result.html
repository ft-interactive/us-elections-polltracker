{% extends "g-ui/layout/article" %}

{% import "page-elements.html" as PageElements -%}

{% set layout = {name: 'full-body'} %}
{% set stylesheets = ['https://origami-build.ft.com/v2/bundles/css?modules=o-expander@^4.0.2,o-buttons@^4.0.2','result-page.css','result-bars.css'] %}
{% set scripts = [
  'https://origami-build.ft.com/v2/bundles/js?modules=o-expander@^4.0.2,o-buttons@^4.0.2&export=bundle',
  'result-page.js'
  ]
%}

{% block appendhead %}
<script>
    var timestamp = {{ overview.timestamp }};
</script>
{% endblock -%}

{% block article_body %}
<div class="o-grid-container {{ 'page__national' if code == 'us' }}">
  <div class="o-grid-row">
    <div data-o-grid-colspan="center 11 L9">
        {% import "includes/result-bar-macros.html" as bars %}
        <div>
            {{ bars.president(
                overview.president.isFinal,
                overview.president.clinton,
                overview.president.clinton_pct,
                overview.president.trump,
                overview.president.trump_pct,
                overview.president.bestGuessClinton_pct,
                overview.president.bestGuessTrump_pct,
                "footnote") }}
            <div>
                {% include "includes/results-plain-map.svg" %}
            </div>
            <div>
                {% include "includes/results-dot-map.svg" %}
            </div>
        </div>
    </div>
    <div data-o-grid-colspan="12 L6">

        {% call PageElements.Figure(title="What the US media is saying") %}
          {% for org in mediaOrgs %}
          <div>{{ org.name }} Clinton:{{org.totals.d}} Trump:{{org.totals.r}} ({{ org.totals.r + org.totals.d }}/ 538)</div>
          {% endfor %}
        {% endcall %}
    </div>
    <div data-o-grid-colspan="12 L6">
        <div id="congressional">
          {% call PageElements.Figure(title="House", id="Senate") %}
                {{ bars.house(
                  overview.house.dem_pct,
                  overview.house.dem,
                  overview.house.rep_pct,
                  overview.house.rep,
                  "footnote") }}
          {% endcall %}

          {% call PageElements.Figure(title="Senate", id="House") %}
            {{ bars.senate(
              overview.senate.dem_pct,
              overview.senate.dem,
              overview.senate.rep_pct,
              overview.senate.rep,
              "footnote")
            }}
          {% endcall %}
        </div>
    </div>
    <div data-o-grid-colspan="center 12 M9 L6">
        {% call PageElements.Figure(title="Senate", id="House") %}
          <table class="ecresultslist">
            <thead>
              <tr>
                <th class="ecresultslist__headercell">2012</th>
                <th class="ecresultslist__headercell">2016</th>
                <th class="ecresultslist__headercell">State</th>
                <th class="ecresultslist__headercell">Votes</th>
                <th class="ecresultslist__headercell--optional">Margin</th>
              </tr>
            </thead>
            <tbody>
              {% for state in stateResults %}
              <tr>
                <td class="ecresultslist__cell--{{ state.code | winner2012 }}"></td>
                <td class="ecresultslist__cell--{% if state.winner == 'r' %}rep{% endif %}{% if state.winner == 'd' %}dem{% endif %}">{% if state.winner == 'r' %} Trump {% endif %} {% if state.winner == 'd' %}Clinton{% endif %}</td>
                <td class="ecresultslist__cell">{{ state.code | stateName }}</td>
                <td class="ecresultslist__cell">{{ state.ecvotes }}</td>
                <td class="ecresultslist__cell"></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        {% endcall %}
    </div>
  </div>
</div>
{% endblock %}
